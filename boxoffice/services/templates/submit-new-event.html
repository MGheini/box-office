{% extends "layout.html" %}

{% block title %}
ثبت رویداد جدید
{% endblock %}

{% load staticfiles %}

{% block style %}
<link rel="stylesheet" href="{% static "styles/skins/aqua/theme.css" %}">
<link rel="stylesheet" href="{% static "styles/pcustom.css" %}" />
<style type="text/css">
  .row-event {
    background-color: #ecf0f1;
  }
</style>
{% endblock %}

{% block content %}
<script type="text/javascript" src="{% static "scripts/jquery-1.9.1.min.js" %}"></script>
<div id="reg-form">
  <div class="well" style="margin: 0px;">
    <p style="font-size: 28px;">ثبت رویداد جدید</p>
    <form name="submitNewEvent" action="" method="post" onsubmit="">
      {% csrf_token %}
      {% for field in event_form %}
      <div class="row" style="background-color: #ecf0f1; margin: 0px;">
        <div class="col-md-2" style="padding: 5px">{{ field.label }}</div>
        <div class="col-md-5">{{ field }}</div>
        <div class="col-md-5 error">{{ field.errors }}</div>
      </div>
      {% endfor %}
      <!-- START of adding ticket -->
      <div class="row" style="background-color: #ecf0f1; margin: 0px;">
        <div class="col-md-2" style="padding: 5px">نوع بلیت</div>
        
        <div class="col-md-8" style="padding-right: 0">
          <div class="row-event" id="ticketDiv">
            <div class="col-md-3">
              <input type="text" placeholder="نوع" style="padding-top: 15px" />
            </div>
            
            <div class="col-md-5">
              <div class="input-group">
                <input type="text" placeholder="قیمت" style="padding-top: 15px; border-top-left-radius: 0; border-bottom-left-radius: 0" />
                <span class="input-group-addon" style="color: #D6E0EA; border-top-right-radius: 0;">
                  <span class="text-primary">تومان</span>
                </span>
              </div>
            </div>
            
            <div class="col-md-3">
              <input type="text" placeholder="ظرفیت" style="padding-top: 15px" />
            </div>

            <div class="col-md-1">
              <button id="addTicketRow" class="btn btn-default btn-circle"><span class="glyphicon glyphicon-plus"></span></button>
            </div>

          </div>
        </div>
      </div>
      <!-- END of adding ticket -->
      <button id="submit-new-event" class="btn btn-primary btn-block" type="submit" style="width: 200px;">ثبت</button>
    </form>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
function addTicket(e) {
  e.preventDefault();
  document.getElementById('ticketDiv').innerHTML +='<div class="col-md-3"><input type="text" placeholder="نوع" style="padding-top: 15px" /></div>'
  +'<div class="col-md-5"><div class="input-group"><input type="text" placeholder="قیمت" style="padding-top: 15px; border-top-left-radius: 0; border-bottom-left-radius: 0" /><span class="input-group-addon" style="color: #D6E0EA; border-top-right-radius: 0;">'
  +'<span class="text-primary">تومان</span></span></div></div><div class="col-md-3"><input type="text" placeholder="ظرفیت" style="padding-top: 15px" /></div><div class="col-md-1"><button id="addTicketRow" class="btn btn-default btn-circle" style="visibility: hidden;"><span class="glyphicon glyphicon-plus"></span></button></div><br/>';

  document.getElementById('addTicketRow').addEventListener('click', addTicket);
}
document.getElementById('addTicketRow').addEventListener('click', addTicket);
</script>
<script src="{% static "scripts/jalali.js" %}"></script>
<script src="{% static "scripts/calendar.js" %}"></script>
<script src="{% static "scripts/calendar-setup.js" %}"></script>
<script src="{% static "scripts/lang/calendar-fa.js" %}"></script>
<script>
  Calendar.setup({
    inputField     :    "date_input",   // id of the input field
    button         :    "date_input",   // trigger for the calendar (button ID)
    ifFormat       :    "%Y-%m-%d %H:%M",       // format of the input field
    showsTime      :    true,
    dateType     :  'jalali',
    timeFormat     :    "24",
    weekNumbers    : false
  });

  Calendar.setup({
    inputField     :    "date_input_2",   // id of the input field
    button         :    "date_input_2",   // trigger for the calendar (button ID)
    ifFormat       :    "%Y-%m-%d %H:%M",       // format of the input field
    showsTime      :    true,
    dateType     :  'jalali',
    timeFormat     :    "24",
    weekNumbers    : false
  });       
</script>
{% endblock %}